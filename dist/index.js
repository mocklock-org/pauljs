"use strict";const fs=require("fs").promises,path=require("path"),ejs=require("ejs"),express=require("express"),hero=require("./components/hero"),cta=require("./components/cta"),footer=require("./components/footer"),reactAdapter=require("./adapters/react"),components={hero:hero,cta:cta,footer:footer};class PaulJS{constructor(){this.app=express(),this.pages=new Map,this.setupMiddleware()}setupMiddleware(){this.app.use(express.static("public")),this.app.use(express.json()),this.app.set("view engine","ejs"),this.app.set("views",path.join(__dirname,"templates"))}async createPage(e,t={}){const r={title:t.title||"PaulJS Page",description:t.description||"Built with PaulJS",styles:t.styles||"",scripts:t.scripts||"",hero:components.hero.render(t.hero||{}),cta:components.cta.render(t.cta||{}),footer:components.footer.render(t.footer||{})};return this.pages.set(e,r),this.app.get(e,((e,t)=>{t.render("default",r)})),e}async exportStaticSite(e="dist"){try{await fs.mkdir(e,{recursive:!0});for(const[t,r]of this.pages){const s=path.join(__dirname,"templates","default.ejs"),o=await fs.readFile(s,"utf-8"),a=ejs.render(o,r),i=path.join(process.cwd(),e,"/"===t?"index.html":`${t.slice(1)}.html`);await fs.writeFile(i,a)}return e}catch(e){throw new Error(`Error exporting static site: ${e.message}`)}}start(e=3e3){return new Promise((t=>{this.server=this.app.listen(e,(()=>{console.log(`ðŸš€ PaulJS server running at http://localhost:${e}`),t(this.server)}))}))}stop(){this.server&&this.server.close()}}const componentFactory=e=>(t={})=>e.render(t);module.exports={createApp:()=>new PaulJS,components:Object.keys(components).reduce(((e,t)=>(e[t]=componentFactory(components[t]),e)),{}),adapters:{react:reactAdapter}};